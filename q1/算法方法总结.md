# ç¬¬ä¸€é¢˜ç®—æ³•æ–¹æ³•æ€»ç»“

## ğŸ¯ **å®é™…ä½¿ç”¨çš„ç®—æ³•æ–¹æ³•**

### **1. å¯å‘å¼æœç´¢ç®—æ³•**
```python
# ä¸æ˜¯ç©·ä¸¾æœç´¢ï¼Œè€Œæ˜¯åŸºäºä¼˜å…ˆçº§çš„å¯å‘å¼æœç´¢
test_allocations = [
    (20, 20, 10),  # ä¼˜å…ˆæ»¡è¶³eMBBå’ŒURLLCï¼ŒmMTCåˆ†é…å‰©ä½™
    (20, 25, 5),   # ä¼˜å…ˆæ»¡è¶³eMBBï¼Œç„¶åURLLCï¼ŒmMTCæœ€å°‘
    (15, 25, 10),  # ä¼˜å…ˆæ»¡è¶³eMBBï¼ŒURLLCéƒ¨åˆ†æ»¡è¶³ï¼ŒmMTCåˆ†é…å‰©ä½™
    (25, 15, 10),  # ä¼˜å…ˆæ»¡è¶³URLLCï¼ŒeMBBéƒ¨åˆ†æ»¡è¶³ï¼ŒmMTCåˆ†é…å‰©ä½™
    (30, 15, 5),   # ä¼˜å…ˆæ»¡è¶³URLLCï¼ŒeMBBéƒ¨åˆ†æ»¡è¶³ï¼ŒmMTCæœ€å°‘
]
```

### **2. ä¼˜å…ˆçº§åˆ†é…ç­–ç•¥**

#### **åˆ‡ç‰‡é—´ä¼˜å…ˆçº§**
```
eMBB > URLLC > mMTCï¼ˆæŒ‰QoSè´¡çŒ®æ’åºï¼‰
- eMBB: å¹³å‡QoSè´¡çŒ®3.6000ï¼ˆæœ€é«˜ï¼‰
- URLLC: å¹³å‡QoSè´¡çŒ®1.7919
- mMTC: å¹³å‡QoSè´¡çŒ®0.4200
```

#### **åˆ‡ç‰‡å†…éƒ¨ä¼˜å…ˆçº§**
```
æŒ‰ç”¨æˆ·ç¼–å·æ’åºï¼š
- URLLC: U1 > U2
- eMBB: e1 > e2 > e3 > e4  
- mMTC: m1 > m2 > ... > m10
```

### **3. çº¦æŸæ£€æŸ¥æ–¹æ³•**

#### **èµ„æºå—å€æ•°çº¦æŸ**
```python
urllc_valid = urllc_rbs % 10 == 0  # URLLCå¿…é¡»æ˜¯10çš„å€æ•°
embb_valid = embb_rbs % 5 == 0     # eMBBå¿…é¡»æ˜¯5çš„å€æ•°
mmtc_valid = mmtc_rbs % 2 == 0     # mMTCå¿…é¡»æ˜¯2çš„å€æ•°
```

#### **ç”¨æˆ·æœåŠ¡çº¦æŸ**
```python
urllc_served = urllc_rbs // 10  # URLLCå¯æœåŠ¡ç”¨æˆ·æ•°
embb_served = embb_rbs // 5     # eMBBå¯æœåŠ¡ç”¨æˆ·æ•°
```

### **4. mMTCä¼˜å…ˆçº§åˆ†é…ç®—æ³•**

```python
def calculate_mmtc_priority_allocation_fixed(mmtc_rbs, user_data):
    # 1. è®¡ç®—å®Œæ•´çº¦æŸç”¨æˆ·æ•°
    full_constraint_users = mmtc_rbs // 2  # å¯ä»¥åˆ†é…2RBçš„ç”¨æˆ·æ•°
    remaining_rbs = mmtc_rbs % 2          # å‰©ä½™èµ„æºå—
    
    # 2. æŒ‰ç”¨æˆ·ç¼–å·æ’åºï¼ˆç¬¦åˆé¢˜ç›®è¦æ±‚ï¼‰
    user_list.sort(key=lambda x: x['user_number'])
    
    # 3. ä¼˜å…ˆçº§åˆ†é…
    for i, user_info in enumerate(user_list):
        if i < full_constraint_users:
            # æ»¡è¶³å®Œæ•´çº¦æŸçš„ç”¨æˆ·ï¼ˆåˆ†é…2RBï¼‰
            allocation.append({'rbs': 2, 'constraint_satisfied': True})
        elif i < full_constraint_users + remaining_rbs:
            # åˆ†é…1RBçš„ç”¨æˆ·
            allocation.append({'rbs': 1, 'constraint_satisfied': False})
        else:
            # æ²¡æœ‰åˆ†é…åˆ°èµ„æºçš„ç”¨æˆ·
            allocation.append({'rbs': 0, 'constraint_satisfied': False})
```

### **5. QoSè®¡ç®—æ–¹æ³•**

#### **SINRè®¡ç®—**
```python
def calculate_sinr(power_dbm, large_scale_db, small_scale, num_rbs):
    # æ¥æ”¶åŠŸç‡è®¡ç®—
    received_power = 10**((power_dbm - large_scale_db) / 10) * small_scale
    
    # å™ªå£°åŠŸç‡è®¡ç®—
    noise_power_dbm = thermal_noise + 10 * math.log10(num_rbs * bandwidth_per_rb) + NF
    noise_power_mw = 10**((noise_power_dbm - 30) / 10)
    
    # SINRè®¡ç®—
    sinr = received_power / noise_power_mw
    return sinr
```

#### **ä¼ è¾“é€Ÿç‡è®¡ç®—**
```python
def calculate_rate(sinr, num_rbs):
    rate = num_rbs * bandwidth_per_rb * math.log2(1 + sinr)
    return rate / 1e6  # è½¬æ¢ä¸ºMbps
```

#### **QoSè®¡ç®—**
```python
# URLLC QoS
def calculate_urllc_qos(rate, delay):
    if delay <= 5:  # 5ms
        return 0.95 ** delay  # Î±^L
    else:
        return -5  # æƒ©ç½š

# eMBB QoS  
def calculate_embb_qos(rate, delay):
    if delay <= 100:  # 100ms
        if rate >= 50:  # 50Mbps
            return 1.0
        else:
            return rate / 50  # r/r_SLA
    else:
        return -3  # æƒ©ç½š

# mMTC QoS
def calculate_mmtc_qos(connection_ratio, delay):
    if delay <= 500:  # 500ms
        return connection_ratio  # æ¥å…¥æ¯”ä¾‹
    else:
        return -1  # æƒ©ç½š
```

## ğŸ” **ç®—æ³•ç‰¹ç‚¹**

### **1. æœç´¢ç­–ç•¥**
- **å¯å‘å¼æœç´¢**ï¼šä¸æ˜¯ç©·ä¸¾æ‰€æœ‰ç»„åˆï¼Œè€Œæ˜¯åŸºäºä¼˜å…ˆçº§è®¾è®¡å€™é€‰æ–¹æ¡ˆ
- **å€™é€‰æ–¹æ¡ˆæ•°é‡**ï¼š5ä¸ªé¢„å®šä¹‰çš„åˆ†é…æ–¹æ¡ˆ
- **æ—¶é—´å¤æ‚åº¦**ï¼šO(1)ï¼Œå›ºå®š5ä¸ªæ–¹æ¡ˆ

### **2. ä¼˜å…ˆçº§ç­–ç•¥**
- **åˆ‡ç‰‡é—´**ï¼šæŒ‰QoSè´¡çŒ®æ’åº
- **åˆ‡ç‰‡å†…**ï¼šæŒ‰ç”¨æˆ·ç¼–å·æ’åº
- **mMTCç‰¹æ®Š**ï¼šæŒ‰ç”¨æˆ·ç¼–å·ä¼˜å…ˆçº§åˆ†é…å‰©ä½™èµ„æº

### **3. çº¦æŸå¤„ç†**
- **ç¡¬çº¦æŸ**ï¼šURLLCå’ŒeMBBå¿…é¡»æ»¡è¶³å€æ•°çº¦æŸ
- **è½¯çº¦æŸ**ï¼šmMTCå…è®¸éƒ¨åˆ†æ»¡è¶³ï¼Œé‡‡ç”¨ä¼˜å…ˆçº§åˆ†é…

### **4. è¯„ä¼°æ–¹æ³•**
- **QoSè®¡ç®—**ï¼šä¸¥æ ¼æŒ‰ç…§SLAå®šä¹‰
- **çº¦æŸæ£€æŸ¥**ï¼šæ£€æŸ¥å€æ•°çº¦æŸå’Œç”¨æˆ·æœåŠ¡çº¦æŸ
- **æœ€ä¼˜é€‰æ‹©**ï¼šé€‰æ‹©æ€»QoSæœ€é«˜çš„æ–¹æ¡ˆ

## ğŸ“Š **ç®—æ³•ä¼˜åŠ¿**

1. **é«˜æ•ˆæ€§**ï¼šåªæµ‹è¯•5ä¸ªå€™é€‰æ–¹æ¡ˆï¼Œè®¡ç®—é€Ÿåº¦å¿«
2. **åˆç†æ€§**ï¼šåŸºäºQoSè´¡çŒ®çš„ä¼˜å…ˆçº§ç­–ç•¥
3. **å…¬å¹³æ€§**ï¼šæŒ‰ç”¨æˆ·ç¼–å·æ’åºç¡®ä¿å…¬å¹³
4. **å®ç”¨æ€§**ï¼šé€‚åº”èµ„æºä¸è¶³çš„å®é™…æƒ…å†µ

## ğŸ¯ **æœ€ç»ˆç»“æœ**

**æœ€ä¼˜æ–¹æ¡ˆ**: URLLC=20, eMBB=20, mMTC=10
**æ€»QoS**: 6.4910
**ç®—æ³•ç±»å‹**: å¯å‘å¼æœç´¢ + ä¼˜å…ˆçº§åˆ†é… 